{"version":3,"file":"js/60.1a8de96b.js","mappings":"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","sources":["webpack://frontend/./src/views/ExploitStatsView.vue","webpack://frontend/./src/views/ExploitStatsView.vue?5702"],"sourcesContent":["<template>\n    <div class=\"container d-flex flex-column\" style=\"height: calc(100vh - 58px - 4.5rem)\">\n        <div v-if=\"exploit\" class=\"d-flex flex-column\" style=\"flex: 1; min-height: 100%\">\n            <h3>Exploit Stats ({{ exploit.name }})</h3>\n            <div class=\"row mt-4\" style=\"flex: 1\">\n                <select class=\"form-select\" aria-label=\"Default select example\" v-model=\"selectedTeam\" @change=\"selectionChanged\">\n                    <option value=\"0\">All</option>\n                    <option v-for=\"team of teams\" :value=\"team.id\">{{ team.name }}</option>\n                </select>\n                <div class=\"flex-fill mt-4\">\n                    <Line v-if=\"flagsTick\" :data=\"flagsTick\" :options=\"flagsTickOptions\" />\n                </div>\n            </div>\n        </div>\n        <div v-else>\n            <h3>No data available</h3>\n        </div>\n    </div>\n</template>\n\n<script>\n\"use strict\";\n\nimport * as _ from \"lodash\";\nimport { api, colors } from \"../utils.js\";\nimport {\n    Chart as ChartJS,\n    CategoryScale,\n    LinearScale,\n    PointElement,\n    LineElement,\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    BarElement\n} from \"chart.js\";\nimport { Line } from \"vue-chartjs\";\n\nChartJS.register(\n    CategoryScale,\n    LinearScale,\n    PointElement,\n    LineElement,\n    Title,\n    ArcElement,\n    BarElement,\n    Tooltip,\n    Legend\n);\n\nexport default {\n    name: \"Dashboard\",\n    components: { Line },\n    data() {\n        return {\n            timer: undefined,\n            exploit: undefined,\n            teams: [],\n            selectedTeam: 0,\n            flagsTick: undefined,\n            flagsTickOptions: {\n                responsive: true,\n                maintainAspectRatio: false,\n            },\n        };\n    },\n    methods: {\n        async getExploit() {\n            try {\n                let req = await api.get(`/exploits/${this.$route.params.id}`);\n                if (req.status === 200) {\n                    this.exploit = await req.json();\n                    await this.getFlagsTick();\n                }\n\n                req = await api.get(`/teams`);\n                if (req.status === 200) {\n                    this.teams = await req.json();\n                    await this.getFlagsTick();\n                }\n            } catch (exception) {\n                console.log(exception);\n            }\n        },\n        async selectionChanged(){\n            await this.getFlagsTick(this.selectedTeam)\n        },\n        async getFlagsTick(team = 0) {\n            let res = [];\n            try {\n                let req = undefined\n                if (!team || team == 0)\n                    req = await api.get(`/stats/flags/${this.$route.params.id}/all`);\n                else\n                    req = await api.get(`/stats/flags/${this.$route.params.id}/${team}`);\n\n                if (req.status == 200)\n                    res = await req.json();\n            } catch (exception) {\n                console.log(exception);\n            }\n            const stamp_now = Date.now() / 1000;\n            const tick_now = stamp_now - (stamp_now % 120);\n\n            let n = 0\n            if (res.length > 0){\n                n = ((tick_now - res[0].tick_start) / 120) + 1;\n            }\n\n            let out = [];\n\n            for (let i = 0; i < n; i++) {\n                let tick = tick_now - 120 * i;\n                let found = res.find((el, i) => el.tick_start === tick)\n\n                if (found) {\n                    out[i] = found\n                } else {\n                    out[i] = {\n                        \"total\": 0,\n                        \"queued\": 0,\n                        \"accepted\": 0,\n                        \"rejected\": 0,\n                        \"tick_start\": tick\n                    }\n                }\n            }\n\n            let labels = out.reverse().map((el) => {\n                return new Date(new Date(el.tick_start * 1000).toUTCString())\n                    .toLocaleString()\n                    .split(\", \")[1]\n                    .slice(0, -3);\n            });\n\n            this.flagsTick = {\n                labels,\n                datasets: [\n                    {\n                        label: \"Flags\",\n                        data: out.map(item => item.total),\n                        backgroundColor: \"#6f42c1\",\n                        borderColor: \"#6f42c1\",\n                    },\n                ],\n            };\n        },\n    },\n    async mounted() {\n        await this.getExploit();\n\n        this.selectedTeam = 0\n\n        this.timer = setInterval(async () => {\n            await this.getFlagsTick();\n        }, 30 * 1000);\n    },\n    async unmounted() {\n        clearInterval(this.timer);\n    },\n};\n</script>\n","import { render } from \"./ExploitStatsView.vue?vue&type=template&id=5f627ac8\"\nimport script from \"./ExploitStatsView.vue?vue&type=script&lang=js\"\nexport * from \"./ExploitStatsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","value","_hoisted_8","_createElementBlock","_hoisted_1","$data","exploit","_hoisted_2","_toDisplayString","name","_hoisted_3","selectedTeam","$event","onChange","_cache","args","$options","selectionChanged","_hoisted_4","_Fragment","_renderList","teams","team","id","_hoisted_5","_hoisted_6","flagsTick","_createBlock","_component_Line","data","options","flagsTickOptions","_hoisted_7","_hoisted_9","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Title","ArcElement","BarElement","Tooltip","Legend","components","Line","timer","undefined","responsive","maintainAspectRatio","methods","async","req","api","get","this","$route","params","status","json","getFlagsTick","exception","console","log","res","stamp_now","Date","now","tick_now","n","length","tick_start","out","i","tick","found","find","el","labels","reverse","map","toUTCString","toLocaleString","split","slice","datasets","label","item","total","backgroundColor","borderColor","getExploit","setInterval","clearInterval","__exports__","render"],"sourceRoot":""}