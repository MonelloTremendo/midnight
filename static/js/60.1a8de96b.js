"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[60],{8060:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var s=a(3396),l=a(7139),i=a(9242);const n={class:"container d-flex flex-column",style:{height:"calc(100vh - 58px - 4.5rem)"}},o={key:0,class:"d-flex flex-column",style:{flex:"1","min-height":"100%"}},c={class:"row mt-4",style:{flex:"1"}},r=(0,s._)("option",{value:"0"},"All",-1),d=["value"],g={class:"flex-fill mt-4"},h={key:1},u=(0,s._)("h3",null,"No data available",-1),m=[u];function f(t,e,a,u,f,p){const w=(0,s.up)("Line");return(0,s.wg)(),(0,s.iD)("div",n,[f.exploit?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("h3",null,"Exploit Stats ("+(0,l.zw)(f.exploit.name)+")",1),(0,s._)("div",c,[(0,s.wy)((0,s._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[0]||(e[0]=t=>f.selectedTeam=t),onChange:e[1]||(e[1]=(...t)=>p.selectionChanged&&p.selectionChanged(...t))},[r,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.teams,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id},(0,l.zw)(t.name),9,d)))),256))],544),[[i.bM,f.selectedTeam]]),(0,s._)("div",g,[f.flagsTick?((0,s.wg)(),(0,s.j4)(w,{key:0,data:f.flagsTick,options:f.flagsTickOptions},null,8,["data","options"])):(0,s.kq)("",!0)])])])):((0,s.wg)(),(0,s.iD)("div",h,m))])}a(4806);var p=a(8661),w=a(9646),k=a(5866);w.kL.register(w.uw,w.f$,w.od,w.jn,w.Dx,w.qi,w.ZL,w.u,w.De);var v={name:"Dashboard",components:{Line:k.x1},data(){return{timer:void 0,exploit:void 0,teams:[],selectedTeam:0,flagsTick:void 0,flagsTickOptions:{responsive:!0,maintainAspectRatio:!1}}},methods:{async getExploit(){try{let t=await p.h.get(`/exploits/${this.$route.params.id}`);200===t.status&&(this.exploit=await t.json(),await this.getFlagsTick()),t=await p.h.get("/teams"),200===t.status&&(this.teams=await t.json(),await this.getFlagsTick())}catch(t){console.log(t)}},async selectionChanged(){await this.getFlagsTick(this.selectedTeam)},async getFlagsTick(t=0){let e=[];try{let a;a=t&&0!=t?await p.h.get(`/stats/flags/${this.$route.params.id}/${t}`):await p.h.get(`/stats/flags/${this.$route.params.id}/all`),200==a.status&&(e=await a.json())}catch(o){console.log(o)}const a=Date.now()/1e3,s=a-a%120;let l=0;e.length>0&&(l=(s-e[0].tick_start)/120+1);let i=[];for(let c=0;c<l;c++){let t=s-120*c,a=e.find(((e,a)=>e.tick_start===t));i[c]=a||{total:0,queued:0,accepted:0,rejected:0,tick_start:t}}let n=i.reverse().map((t=>new Date(new Date(1e3*t.tick_start).toUTCString()).toLocaleString().split(", ")[1].slice(0,-3)));this.flagsTick={labels:n,datasets:[{label:"Flags",data:i.map((t=>t.total)),backgroundColor:"#6f42c1",borderColor:"#6f42c1"}]}}},async mounted(){await this.getExploit(),this.selectedTeam=0,this.timer=setInterval((async()=>{await this.getFlagsTick()}),3e4)},async unmounted(){clearInterval(this.timer)}},x=a(89);const T=(0,x.Z)(v,[["render",f]]);var y=T}}]);
//# sourceMappingURL=60.1a8de96b.js.map