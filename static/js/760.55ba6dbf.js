"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[760],{4760:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var s=a(3396);const l={class:"container d-flex flex-column",style:{height:"calc(100vh - 58px - 4.5rem)"}},c={class:"d-flex flex-column",style:{flex:"1","min-height":"100%"}},o=(0,s._)("h1",null,"Dashboard",-1),i={class:"row mt-4",style:{flex:"1"}},d={class:"col-8 d-flex flex-column"},n=(0,s._)("h4",{class:"text-center"},"Flags retrieved",-1),r={class:"mt-3 flex-fill"},p={class:"col-4 d-flex flex-column"},g=(0,s._)("h4",{class:"text-center"},"Submit stats",-1),f={class:"mt-3 flex-fill"},u={class:"row mt-4",style:{flex:"1"}},k={class:"col-12 d-flex flex-column"},x=(0,s._)("h4",{class:"text-center"},"Flags retrieved by exploit",-1),h={class:"mt-3 flex-fill"};function b(e,t,a,b,m,v){const w=(0,s.up)("Line"),A=(0,s.up)("Pie"),y=(0,s.up)("Bar");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",c,[o,(0,s._)("div",i,[(0,s._)("div",d,[n,(0,s._)("div",r,[m.flagsTick?((0,s.wg)(),(0,s.j4)(w,{key:0,data:m.flagsTick,options:m.flagsTickOptions},null,8,["data","options"])):(0,s.kq)("",!0)])]),(0,s._)("div",p,[g,(0,s._)("div",f,[m.flagsAccepted?((0,s.wg)(),(0,s.j4)(A,{key:0,data:m.flagsAccepted,options:m.flagsAcceptedOptions},null,8,["data","options"])):(0,s.kq)("",!0)])])]),(0,s._)("div",u,[(0,s._)("div",k,[x,(0,s._)("div",h,[m.flagsAcceptedPerExploit?((0,s.wg)(),(0,s.j4)(y,{key:0,data:m.flagsAcceptedPerExploit,options:m.flagsAcceptedPerExploitOptions},null,8,["data","options"])):(0,s.kq)("",!0)])])])])])}a(4806);var m=a(8661),v=a(9646),w=a(5866);v.kL.register(v.uw,v.f$,v.od,v.jn,v.Dx,v.qi,v.ZL,v.u,v.De);var A={name:"Dashboard",components:{Line:w.x1,Pie:w.by,Bar:w.$Q},data(){return{timer:void 0,flagsTick:void 0,flagsAccepted:void 0,flagsAcceptedPerExploit:void 0,flagsTickOptions:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{color:"#3f3f3f",borderColor:"#8b8b8b"}},y:{grid:{color:"#3f3f3f",borderColor:"#8b8b8b"}}}},flagsAcceptedOptions:{responsive:!0,maintainAspectRatio:!1},flagsAcceptedPerExploitOptions:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1},scales:{x:{stacked:!0},y:{stacked:!0}}}}},methods:{async getFlagsTick(){let e=[];try{let t=await m.h.get("/stats/flags/tick");200==t.status&&(e=await t.json())}catch(c){console.log(c)}const t=Date.now()/1e3,a=t-t%120;console.log(a);let s=[];for(let o=0;o<15;o++){let t=a-120*o,l=e.find(((e,a)=>e.tick_start===t));s[o]=l||{total:0,queued:0,accepted:0,rejected:0,tick_start:t}}let l=s.reverse().map((e=>new Date(new Date(1e3*e.tick_start).toUTCString()).toLocaleString().split(", ")[1].slice(0,-3)));this.flagsTick={labels:l,datasets:[{label:"Flags",data:s.map((e=>e.total)),fill:!0,backgroundColor:"#6f42c1",borderColor:"#6f42c1"}]}},async getFlagsAccepted(){let e={queued:0,accepted:0,rejected:0};try{let t=await m.h.get("/stats/flags/all");200==t.status&&(e=await t.json())}catch(t){console.log(t)}this.flagsAccepted={labels:["Queued","Accepted","Rejected"],datasets:[{data:[e.queued,e.accepted,e.rejected],backgroundColor:m.O.green1,backgroundColor:["#a7acb1","#198754","#dc3545"]}]}},async getFlagsAcceptedPerExploit(){let e=[];try{let t=await m.h.get("/stats/flags/scripts");200==t.status&&(e=await t.json())}catch(a){console.log(a)}let t=[{label:"Accepted",data:e.map((e=>e.accepted/e.total*100)),backgroundColor:"#198754",stack:0},{label:"Rejected",data:e.map((e=>e.rejected/e.total*100)),backgroundColor:"#dc3545",stack:0},{label:"Queued",data:e.map((e=>e.queued/e.total*100)),backgroundColor:"#a7acb1",stack:0}];this.flagsAcceptedPerExploit={labels:e.map((e=>e.name)),datasets:t}}},async mounted(){await this.getFlagsTick(),await this.getFlagsAccepted(),await this.getFlagsAcceptedPerExploit(),this.timer=setInterval((async()=>{await this.getFlagsTick(),await this.getFlagsAccepted(),await this.getFlagsAcceptedPerExploit()}),3e4)},async unmounted(){clearInterval(this.timer)}},y=a(89);const _=(0,y.Z)(A,[["render",b]]);var j=_}}]);
//# sourceMappingURL=760.55ba6dbf.js.map